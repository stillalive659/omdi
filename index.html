<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OMDI TSAN COFA 7 - Olimpiade Madrasah Tsanawiyah</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Changa+One&display=swap" rel="stylesheet">
  <style>
    /* === PRELOADER STYLE === */
    #preloader {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: white;
      z-index: 99999;
      transition: opacity 0.4s ease;
    }
    #preloader.hidden {
      opacity: 0;
      pointer-events: none;
      visibility: hidden;
    }
    .loader {
      width: 64px;
      height: 64px;
      border: 6px solid #ddd;
      border-top-color: #5b21b6; /* warna ungu OMDI */
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    #percent {
      margin-top: 10px;
      font-size: 14px;
      font-weight: bold;
      color: #333;
    }
  </style>

</head>

<body>
  <div id="preloader">
    <div>
      <div class="spinner"></div>
      <div id="percent">0%</div>
    </div>
  </div>
  <div class="section-bg"></div>
  <header>
    <nav>
      <a href="https://mtsnpadangpanjang.sch.id" class="logo">
        <img src="src/icon.png" alt="OMDI Logo"
          style="width:44px;height:44px;border-radius:10px;box-shadow:0 2px 8px rgba(139,92,246,0.10);;object-fit:contain;display:block;">
        <!-- <span style="margin-left:0.7rem;font-weight:700;font-size:1.25rem;color:var(--purple-primary);letter-spacing:1px;">OMDI TSAN</span> -->
      </a>

      <div class="menu-toggle" id="menuToggle">
        <span></span>
        <span></span>
        <span></span>
      </div>

      <ul class="nav-links" id="navLinks">
        <li><a href="#tmeline">Timeline</a></li>
        <li><a href="#tentang">Tentang</a></li>
        <li><a href="#Juknis">Juknis</a></li>  
        <li><a href="#bidang-lomba">Bidang Lomba</a></li>
        <li><a href="#galeri">Galeri</a></li>
        <li><a href="#kontak">Kontak</a></li>
        <li><a href="https://docs.google.com/forms/d/1zBmKw9E0-P3myq5f0tgXznppGvbmlux9_MzN5CASjXs/edit" class="btn-primary">Daftar Sekarang</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <!-- Hero Section -->
    <div class="hero">
      <div class="hero-badge">
        🏆 OMDI 2025
      </div>
      <h1>OMDI TSANCOFA <br>7ᵗʰ</h1>
      <p>Be A Diamond Of Knowledge And Pearl Of Faith</p>
      <div class="hero-cta">
        <a href="https://docs.google.com/forms/d/1zBmKw9E0-P3myq5f0tgXznppGvbmlux9_MzN5CASjXs/edit" class="btn-primary" style="padding: 1rem 2.5rem;">Daftar Sekarang</a>
        <a href="#bidang-lomba" class="btn-secondary">Lihat Bidang Lomba</a>
      </div>
    </div>

    <!-- Countdown -->
    <section class="countdown-wrapper">
      <div class="countdown-card">
        <div class="countdown-title">⏰ Hitung Mundur Menuju OMDI 2025</div>
        <div class="countdown-grid">
          <div class="countdown-item">
            <span class="countdown-value" id="days">00</span>
            <span class="countdown-label">Hari</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-value" id="hours">00</span>
            <span class="countdown-label">Jam</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-value" id="minutes">00</span>
            <span class="countdown-label">Menit</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-value" id="seconds">00</span>
            <span class="countdown-label">Detik</span>
          </div>
        </div>
        <div class="edit-note" style="margin-top: 2rem; font-size: larger;">13 desember 2025</div>
      </div>
    </section>

    <!-- Timeline Section -->
    <section id="tmeline">
      <div class="section-header">
        <div class="section-badge">Timeline</div>
        <h2 class="section-title">Timeline Pelaksanaan OMDI</h2>
        <p class="section-description">Pantau perkembangan setiap tahap kegiatan secara real-time.</p>
      </div>
      <div class="timeline" id="timeline"></div>
    </section>

    <section id="tentang">
      <div class="section-header">
        <div class="section-badge">Tentang OMDI</div>
        <h2 class="section-title">Kompetisi Bergengsi Tingkat Provinsi</h2>
        <p class="section-description">OMDI adalah ajang kompetisi yang mempertemukan siswa-siswi SD/SDIT/MI terbaik di
          Indonesia</p>
      </div>

      <div class="cards-grid">
        <div class="card">
          <div class="card-icon">🏫</div>
          <h3>Ajang SD/SDIT/MI Provinsi</h3>
          <p>Mempertemukan siswa-siswi SD/SDIT/MI terbaik dari seluruh Indonesia untuk berkompetisi secara sehat dan
            inspiratif.</p>
        </div>
        <div class="card">
          <div class="card-icon">🌟</div>
          <h3>Potensi & Prestasi</h3>
          <p>Menggali dan menampilkan potensi akademik, karakter, serta prestasi unggul para peserta dari berbagai
            daerah.</p>
        </div>
        <div class="card">
          <div class="card-icon">🤝</div>
          <h3>Jalin Persahabatan</h3>
          <p>Menjadi wadah silaturahmi, berbagi pengalaman, dan membangun jejaring antar siswa SD/SDIT/MI Tingkat
            Provinsi.</p>
        </div>
      </div>
    </section>

    <!-- Bidang Lomba Section -->
    <section id="bidang-lomba">
      <div class="section-header">
        <div class="section-badge">Bidang Lomba</div>
        <h2 class="section-title">6 Bidang yang Dilombakan</h2>
        <p class="section-description">Pilih bidang yang sesuai dengan minat dan bakatmu</p>
      </div>

      <div class="cards-grid">
        <div class="card">
          <img src="" alt="Matematika" class="card-img">
          <div class="edit-note">📸 Foto Matematika</div>
          <h3>🔢 Matematika</h3>
          <p>Kompetisi matematika untuk mengasah kemampuan logika, problem solving, dan analytical thinking siswa</p>
        </div>
        <div class="card">
          <img src="" alt="IPA" class="card-img">
          <div class="edit-note">📸 Foto IPA</div>
          <h3>🔬 IPA</h3>
          <p>Lomba IPA yang menguji pengetahuan tentang biologi, fisika, dan kimia serta aplikasinya</p>
        </div>
        <div class="card">
          <img src="" alt="IPS" class="card-img">
          <div class="edit-note">📸 Foto IPS</div>
          <h3>🌍 IPS</h3>
          <p>Kompetisi IPS untuk menguji pemahaman tentang sejarah, geografi, ekonomi, dan sosiologi</p>
        </div>
        <div class="card">
          <img src="" alt="Tahfiz" class="card-img">
          <div class="edit-note">📸 Foto Tahfiz</div>
          <h3>📖 PAI</h3>
          <p>Lomba menghafal Al-Qur'an dengan tajwid yang benar dan pemahaman makna ayat suci</p>
        </div>
        <div class="card">
          <img src="" alt="Tahfiz" class="card-img">
          <div class="edit-note">📸 Foto Tahfiz</div>
          <h3>📖 Tahfiz Al-Qur'an</h3>
          <p>Lomba menghafal Al-Qur'an dengan tajwid yang benar dan pemahaman makna ayat suci</p>
        </div>


        <div class="card">
          <img src="" alt="Solo Song" class="card-img">
          <div class="edit-note">📸 Foto Solo Song</div>
          <h3>🎤 Solo Song </h3>
          <p>Lomba menyanyi solo lagu-lagu untuk menumbuhkan bakat seni dan kecintaan pada nilai-nilai keislaman</p>
        </div>

      </div>
    </section>

    <!-- Feature Sections
    <section>
      <div class="feature-section">
        <div class="feature-content">
          <div class="feature-text">
            <h2>Persiapan Matang untuk Sukses</h2>
            <p>Program pembinaan intensif dengan mentor berpengalaman untuk mempersiapkan siswa menghadapi kompetisi
              tingkat nasional dengan percaya diri dan kemampuan terbaik.</p>
            <a href="#" class="btn-primary">Pelajari Lebih Lanjut</a>
          </div>
          <div class="feature-img"></div>
        </div>
        <div class="edit-note">📸 Ganti dengan foto persiapan/pembinaan</div>
      </div>

      <div class="feature-section">
        <div class="feature-content" style="direction: rtl;">
          <div class="feature-text" style="direction: ltr;">
            <h2>Fasilitas & Pendampingan Terbaik</h2>
            <p>Kami menyediakan fasilitas lengkap dan pendampingan berkelanjutan untuk memastikan setiap peserta
              mendapatkan dukungan maksimal dalam perjalanan mereka meraih prestasi.</p>
            <a href="#" class="btn-primary">Lihat Fasilitas</a>
          </div>
          <div class="feature-img"></div>
        </div>
        <div class="edit-note">📸 Ganti dengan foto fasilitas</div>
      </div>
    </section> -->

    <!-- Gallery -->
    <section id="galeri" class="galeri">
      <div class="section-header">
        <div class="section-badge">Galeri</div>
        <h2 class="section-title">Dokumentasi Kegiatan</h2>
        <p class="section-description">Momen-momen berharga dari perjalanan OMDI TSAN</p>
      </div>


      <div class="slider">
        <div class="slide-track">
          <!-- 6 gambar asli -->
          <div class="slide"><img src="src/galeri/1.png" alt=""></div>
          <div class="slide"><img src="src/galeri/2.png" alt=""></div>
          <div class="slide"><img src="src/galeri/3.png" alt=""></div>
          <div class="slide"><img src="src/galeri/4.png" alt=""></div>
          <div class="slide"><img src="src/galeri/5.png" alt=""></div>
          <div class="slide"><img src="src/galeri/6.png" alt=""></div>

          <!-- duplikasi agar loop-nya halus -->
          <div class="slide"><img src="src/galeri/1.png" alt=""></div>
          <div class="slide"><img src="src/galeri/2.png" alt=""></div>
          <div class="slide"><img src="src/galeri/3.png" alt=""></div>
          <div class="slide"><img src="src/galeri/4.png" alt=""></div>
          <div class="slide"><img src="src/galeri/5.png" alt=""></div>
          <div class="slide"><img src="src/galeri/6.png" alt=""></div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer id="kontak">
    <div class="footer-content">
      <div>
        <div class="footer-logo">OMDI TSAN COFA 7</div>
        <p class="footer-description">Olimpiade Madrasah Tsanawiyah - Tempat Lahirnya Generasi Bertaqwa,
          Kompetitif, dan Inovatif dari MTs Negeri Padang Panjang.</p>
      </div>
      <div class="footer-section">
        <h4>Menu</h4>
        <ul class="footer-links">
          <li><a href="#tentang">Tentang</a></li>
          <li><a href="#Juknis">Juknis</a></li>
          <li><a href="#bidang-lomba">Bidang Lomba</a></li>
          <li><a href="#galeri">Galeri</a></li>
          <li><a href="https://docs.google.com/forms/d/1zBmKw9E0-P3myq5f0tgXznppGvbmlux9_MzN5CASjXs/edit">Pendaftaran</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Kontak</h4>
        <ul class="footer-links">
          <li><a href="mailto:info@mtsnpadangpanjang.sch.id">Email</a></li>
          <li><a href="#">Instagram</a></li>
          <li><a href="#">Facebook</a></li>
          <li><a href="#">YouTube</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Lokasi</h4>
        <ul class="footer-links">
          <li style="color: rgba(255,255,255,0.7)">Jl. Gurun Panjang</li>
          <li style="color: rgba(255,255,255,0.7)">Padang Panjang</li>
          <li style="color: rgba(255,255,255,0.7)">Sumatera Barat</li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 OMDI TSAN COFA 7. All rights reserved. Design By : <a href="https://ilwa.my.id">Ilwa</a> & <a href="https://zfrn.my.id">zfrn</a></p>
    </div>
  </footer>

  <script>
    
    
    const preloader = document.getElementById('preloader');
    const percentText = document.getElementById('percent');

    function getBackgroundUrls() {
      const urls = new Set();
      const regex = /url\((['"])?(.+?)\1\)/g;
      document.querySelectorAll('*').forEach(el => {
        const bg = getComputedStyle(el).backgroundImage;
        let m;
        while ((m = regex.exec(bg)) !== null) {
          urls.add(new URL(m[2], document.baseURI).href);
        }
      });
      return [...urls];
    }

    function getImageUrls() {
      return [...document.images].map(i => i.currentSrc || i.src).filter(Boolean);
    }

    async function preloadAll() {
      const urls = [...new Set([...getBackgroundUrls(), ...getImageUrls()])];
      if (!urls.length) return;
      let done = 0;
      const update = () => {
        const pct = Math.round((done / urls.length) * 100);
        percentText.textContent = pct + '%';
      };
      const loaders = urls.map(u => new Promise(r => {
        const img = new Image();
        img.onload = img.onerror = () => { done++; update(); r(); };
        img.src = u;
      }));
      await Promise.all(loaders);
    }

    (async () => {
      await preloadAll();
      percentText.textContent = '100%';
      preloader.classList.add('hidden');
    })();
    
    // Mobile Menu Toggle
    const menuToggle = document.getElementById('menuToggle');
    const navLinks = document.getElementById('navLinks');

    menuToggle.addEventListener('click', () => {
      navLinks.classList.toggle('active');
    });

    // Close menu when clicking on a link
    document.querySelectorAll('.nav-links a').forEach(link => {
      link.addEventListener('click', () => {
        navLinks.classList.remove('active');
      });
    });

    // Countdown Timer
    const targetDate = new Date('2025-12-13T00:00:00').getTime();

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = targetDate - now;

      if (distance < 0) {
        document.getElementById('days').textContent = '00';
        document.getElementById('hours').textContent = '00';
        document.getElementById('minutes').textContent = '00';
        document.getElementById('seconds').textContent = '00';
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      document.getElementById('days').textContent = String(days).padStart(2, '0');
      document.getElementById('hours').textContent = String(hours).padStart(2, '0');
      document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
      document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);

    // Smooth scroll hanya untuk link internal (yang href-nya diawali dengan #)
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    const targetId = this.getAttribute('href');

    // Hanya jalankan smooth scroll kalau memang link ke elemen di halaman ini
    if (targetId && targetId.startsWith("#") && document.querySelector(targetId)) {
      e.preventDefault();
      document.querySelector(targetId).scrollIntoView({
        behavior: 'smooth'
      });
    }
  });
});

const timelineData = [
      { tahap: "Pendaftaran", mulai: "2025-11-01T08:00:00", akhir: "2025-12-05T16:00:00" },
      { tahap: "Seleksi Awal", mulai: "2025-12-13T08:00:00", akhir: "2025-12-13T10:00:00" },
      { tahap: "Babak Final", mulai: "2025-12-13T13:00:00", akhir: "2025-12-13T15:00:00" },
      { tahap: "Pengumuman", mulai: "2025-12-13T16:30:00", akhir: "2025-12-13T18:00:00" }
    ];

    const timeline = document.getElementById("timeline");

    function clamp(val, min, max) {
      return Math.max(min, Math.min(val, max));
    }

    function formatDateTime(dateStr) {
      const d = new Date(dateStr);
      return d.toLocaleString("id-ID", {
        day: "2-digit",
        month: "short",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit"
      });
    }

    function updateTimeline() {
      const now = new Date();
      timeline.innerHTML = ""; // bersihkan isi lama

      timelineData.forEach(item => {
        const start = new Date(item.mulai);
        const end = new Date(item.akhir);
        let progress = 0;
        let status = "";

        if (now < start) {
          progress = 0;
          status = "Belum Dimulai";
        } else if (now > end) {
          progress = 100;
          status = "Selesai";
        } else {
          const total = end - start;
          const elapsed = now - start;
          progress = clamp((elapsed / total) * 100, 0, 100);
          status = "Berlangsung";
        }

        const event = document.createElement("div");
        event.className = "event";
        event.innerHTML = `
          <h3>${item.tahap}</h3>
          <div class="date">🕒 ${formatDateTime(item.mulai)} → ${formatDateTime(item.akhir)}</div>
          <div class="progress-bar">
            <div class="progress-fill" style="width:${progress}%"></div>
          </div>
          <div class="status">Status: <strong>${status}</strong></div>
        `;
        timeline.appendChild(event);
      });
    }

    updateTimeline();
    // perbarui progress tiap menit agar tetap real-time
    setInterval(updateTimeline, 60000);

  </script>